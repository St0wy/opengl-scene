include(cmake/download-cpm.cmake)

cpmaddpackage("gh:libsdl-org/SDL#release-2.28.5")

cpmaddpackage(
	NAME
	glew
	GIT_TAG
	glew-cmake-2.2.0
	GITHUB_REPOSITORY
	Perlmint/glew-cmake
	OPTIONS
	"BUILD_SHARED_LIBS OFF"
	"ONLY_LIBS ON"
	EXCLUDE_FROM_ALL
	SYSTEM
)

# BUILD_SHARED_LIBS must stay in comments otherwise it's ignored (idk why)

cpmaddpackage(
	NAME
	boost-math
	GIT_TAG
	boost-1.83.0
	GITHUB_REPOSITORY
	boostorg/math
	OPTIONS
	"BUILD_SHARED_LIBS OFF"
	EXCLUDE_FROM_ALL
	SYSTEM
)

cpmaddpackage(
	NAME
	glm
	GIT_TAG
	0.9.9.8
	GITHUB_REPOSITORY
	g-truc/glm
	OPTIONS
	"BUILD_SHARED_LIBS OFF"
	EXCLUDE_FROM_ALL
	SYSTEM
)

cpmaddpackage(
	NAME
	Assimp
	VERSION
	5.3.1
	GITHUB_REPOSITORY
	assimp/assimp
	OPTIONS
	"BUILD_SHARED_LIBS OFF"
	"ASSIMP_WARNINGS_AS_ERRORS OFF"
	EXCLUDE_FROM_ALL
	SYSTEM
)

cpmaddpackage(
	NAME
	GSL
	VERSION
	4.0.0
	GITHUB_REPOSITORY
	microsoft/GSL
	OPTIONS
	"BUILD_SHARED_LIBS OFF"
	EXCLUDE_FROM_ALL
	SYSTEM
)

set(ABSL_PROPAGATE_CXX_STD ON)
set(ABSL_USE_SYSTEM_INCLUDES ON)
cpmaddpackage(
	NAME
	abseil
	GIT_TAG
	20230802.1
	GITHUB_REPOSITORY
	abseil/abseil-cpp
	OPTIONS
	"BUILD_SHARED_LIBS OFF"
	EXCLUDE_FROM_ALL
	SYSTEM
)

cpmaddpackage(
	NAME
	fmt
	GIT_TAG
	10.1.1
	GITHUB_REPOSITORY
	fmtlib/fmt
	OPTIONS
	"BUILD_SHARED_LIBS OFF"
	"FMT_SYSTEM_HEADERS ON"
	"FMT_OS OFF"
	EXCLUDE_FROM_ALL
	SYSTEM
)

cpmaddpackage(
	NAME
	spdlog
	VERSION
	1.12.0
	GITHUB_REPOSITORY
	gabime/spdlog
	OPTIONS
	"BUILD_SHARED_LIBS OFF"
	"SPDLOG_FMT_EXTERNAL ON"
	EXCLUDE_FROM_ALL
	SYSTEM
)

cpmaddpackage(
	NAME
	KTX-Software
	GIT_TAG
	22706420d4fff081e1323134c5356f5d031b5a74
	GITHUB_REPOSITORY
	St0wy/KTX-Software
	OPTIONS
	"BUILD_SHARED_LIBS OFF"
	"KTX_FEATURE_STATIC_LIBRARY ON"
	"KTX_FEATURE_TOOLS OFF"
	"KTX_FEATURE_TESTS OFF"
	"KTX_FEATURE_KTX1 OFF"
	"KTX_FEATURE_VK_UPLOAD OFF"
	"KTX_INSTALL_TARGETS ON"
	EXCLUDE_FROM_ALL
	SYSTEM
)

add_subdirectory(./external)